(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);const t=window.wp.i18n,n=window.wp.blocks,a=window.wp.element,o=window.wp.components;function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}(0,n.registerBlockType)("fireplugins/firebox",{title:(0,t.__)("FireBox","firebox"),description:(0,t.__)("Choose the FireBox you'd like to handle","firebox"),icon:function(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",viewBox:"0 0 40 40"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.43049 0C3.77446 0 0 3.77446 0 8.43049V31.5695C0 36.2255 3.77446 40 8.43049 40H31.5695C36.2255 40 40 36.2255 40 31.5695V8.43049C40 3.77446 36.2255 0 31.5695 0H8.43049ZM11.1211 9.32735C10.1304 9.32735 9.32735 10.1304 9.32735 11.1211V28.8789C9.32735 29.8696 10.1304 30.6726 11.1211 30.6726H28.8789C29.8696 30.6726 30.6726 29.8696 30.6726 28.8789V11.1211C30.6726 10.1304 29.8696 9.32735 28.8789 9.32735H11.1211ZM16.8966 17.9728C16.8966 17.3785 17.3785 16.8966 17.9728 16.8966H22.0272C22.6215 16.8966 23.1034 17.3785 23.1034 17.9728V22.0272C23.1034 22.6215 22.6215 23.1034 22.0272 23.1034H17.9728C17.3785 23.1034 16.8966 22.6215 16.8966 22.0272V17.9728Z",fill:"#2438E9"}))},category:"fireplugins",attributes:{box_id:{type:"select"},box_action:{type:"select",default:"close"},buttonLabel:{type:"text",default:(0,t.__)("Close","firebox")},buttonClasses:{type:"text",default:"button"},preventDefault:{type:"boolean",default:!0}},edit:function(e){var n,l,i=e.attributes,c=e.setAttributes,u=e.className,b=(n=(0,a.useState)(null),l=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw o}}return r}}(n,l)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(n,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=b[0],f=b[1];(0,a.useEffect)((function(){wp.apiFetch({path:"/fireplugins/firebox/boxes"}).then((function(e){f(e)}))}),[]),u+=" fpf-content-wrapper fpf-gutenberg-block-item";var p=i.box_id,d=i.box_action,m=i.buttonLabel,_=i.buttonClasses,x=i.preventDefault;if(!s)return React.createElement("p",{className:u},React.createElement(o.Spinner,null),(0,t.__)("Loading popups...","firebox"));if(0==s.length)return React.createElement("div",{className:u},React.createElement("div",{className:"text-center"},React.createElement("img",{src:fbox_admin_js_object.media_url+"admin/images/logo.svg"}),React.createElement("h6",{className:"fp-gutenberg-block-head-plugin-name margin-0"},(0,t.__)("FireBox","firebox")),React.createElement("p",{className:"fp-gutenberg-block-head-subtitle margin-top-1 margin-bottom-1"},(0,t.__)("No popups found. Please create or enable a popup and try again.","firebox")),React.createElement("a",{href:fbox_admin_js_object.admin_url+"admin.php?page=firebox",target:"_blank",className:"fpf-button primary"},(0,t.__)("Get Started","firebox"))));void 0===p&&c({box_id:s[0].id});var g=function(e){var t=[];return e.map((function(e){t.push({label:e.title,value:e.id})})),t}(s);return React.createElement("div",{className:"fpf-content-wrapper"},React.createElement("div",{className:"text-center"},React.createElement("img",{src:fbox_admin_js_object.media_url+"admin/images/logo.svg"}),React.createElement("h5",{className:"fp-gutenberg-block-head-title"},(0,t.__)("Add a FireBox Button","firebox")),React.createElement("p",{className:"fp-gutenberg-block-head-subtitle"},(0,t.__)("Choose the FireBox you'd like to handle.","firebox")),React.createElement(o.SelectControl,{label:(0,t.__)("Select a FireBox","firebox"),type:"number",value:p,options:g,onChange:function(e){c({box_id:e})}}),React.createElement(o.SelectControl,{label:(0,t.__)("FireBox Action","firebox"),type:"text",value:d,options:[{value:"open",label:(0,t.__)("Open","firebox")},{value:"close",label:(0,t.__)("Close","firebox")},{value:"toggle",label:(0,t.__)("Toggle","firebox")}],onChange:function(e){c({box_action:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Button Label","firebox"),className:"text-left",type:"text",value:m,onChange:function(e){c({buttonLabel:e})}}),React.createElement(o.TextControl,{label:(0,t.__)("Button Classes","firebox"),className:"text-left",type:"text",value:_,onChange:function(e){c({buttonClasses:e})}}),React.createElement(o.ToggleControl,{label:(0,t.__)("Prevent Default Action","firebox"),type:"boolean",checked:x,onChange:function(e){c({preventDefault:e})}})))},save:function(e){var t=e.attributes;return React.createElement("p",{dangerouslySetInnerHTML:{__html:function(e){if(null!=e.box_id&&null!=e.box_action&&null!=e.buttonLabel){var t='<a href="#"';return void 0!==e.box_id&&(t+=' data-fbox="'+e.box_id+'"'),void 0!==e.box_action&&(t+=' data-fbox-cmd="'+e.box_action+'"'),void 0!==e.buttonClasses&&(t+=' class="'+e.buttonClasses+'"'),(t+=' data-fbox-prevent="'+(e.preventDefault?"1":"0")+'"')+">"+e.buttonLabel+"</a>"}}(t)}})}}),(window.wp=window.wp||{})["firebox.js"]=e})();
