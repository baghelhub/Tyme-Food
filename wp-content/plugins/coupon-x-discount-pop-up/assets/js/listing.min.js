const{__:e,_x:l,_n:t,_nx:a}=wp.i18n;jQuery("document").ready(function(l){l(".leads-listing").DataTable({dom:"Bfrtip",pageLength:20,lengthChange:!1,oLanguage:{sEmptyTable:e("You don't have any leads yet. Once you collect email leads, the data will appear in this table.","coupon-x")},buttons:[{extend:"csv",exportOptions:{columns:[1,2,3,4]}},{text:e("Delete","coupon-x"),attr:{id:"btn-delete"},action:function(a,o,c,d){if(0==l(".chk_lead:checked").length)alert(e("Please select at least one record","coupon-x"));else{let n=[];l("#lead-delete-confirm p").text(e("Are you sure you want to delete selected leads?","coupon-x")),l(".chk_lead:checked").each(function(){n.push(l(this).val())}),leads=n.join(","),l("#dashboard_lead_id").val(leads),t.dialog("open")}}}]}),l(".select-all").click(function(){l(this).is(":checked")?l(".chk_lead").prop("checked",!0):l(".chk_lead").prop("checked",!1)}),l(".chk_lead").click(function(){l(this).is(":checked")||l(".select-all").prop("checked",!1)});let t=l("#lead-delete-confirm").dialog({resizable:!1,modal:!0,draggable:!1,height:"auto",width:400,overflow:"auto",autoOpen:!1,buttons:[{text:e("Cancel","coupon-x"),class:"btn btn-cancel",click:function(){l(this).dialog("close")}},{text:e("Delete Lead","coupon-x"),class:"btn btn-red",click:function(){url=cx_data.site_url+"/wp-json/couponx/v1/delete_leads";let t=[];l("#lead-delete-confirm p").text(e("Are you sure you want to delete selected leads?","coupon-x")),l(".chk_lead:checked").each(function(){t.push(l(this).val())}),l("#loader").show(),l.post({url:url,headers:{"X-WP-Nonce":l('input[name="cx_nonce"]').val()},data:{id:t},success:function(e){console.log(e),ids=leads.split(","),l.each(ids,function(e,t){l('.chk_lead[value="'+t+'"').closest("tr").hide()}),l("#loader").hide(),l("#wp_flash_message").removeClass("hide"),setTimeout(function(){l("#wp_flash_message").addClass("hide"),location.reload()},2e3)}}),l(this).dialog("close")}}]});l("body").on("click",".ui-widget-overlay",function(){console.log("called"),t.dialog("close")}),l(".close_flash_popup").click(function(){l("#wp_flash_message").addClass("hide")}),l(".delete-lead").click(function(a){a.preventDefault(),link=l(this).closest("tr"),l("#lead-delete-confirm p").text(e("Are you sure you want to delete this lead?","coupon-x"));let o=l(this).attr("lead-id");l("#dashboard_lead_id").val(o),t.dialog("open")})});
